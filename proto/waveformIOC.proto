# waveformIOC.proto
#
# StreamDevice protocol file for Keysight 33500B Waveform Generator
#
# Author : Kim Yunho(kim.yh@postech.ac.kr)
# Date   : 2024-09-02
# Version: 1.1

@writetimeout { disconnect; }
@replytimeout { disconnect; }
@readtimeout  { disconnect; }
@mismatch     { disconnect; }

ReplyTimeout = 3000;
InTerminator = "\r";
OutTerminator = "\r";
Terminator = CR LF;

# Ragular expression
cmd
{
    out "\$1";
}

setD 
{
    out "\$1 %d";
    @init { out "\$1?"; in "%d"; }
}

getD
{
    out "\$1?";
    in "%d";
    ExtraInput = Ignore;
}

setF
{
    out "\$1 %f";
    @init 
    { 
        out "\$1?"; 
        in "%d"; 
    }
}

getF
{
    out "\$1?";
    in "%f";
    ExtraInput = Ignore;
}

# Define protocol for setting frequency
setFrequency
{
    out "FREQ %f";
}

# Define protocol for reading frequency
getFrequency
{
    out "FREQ?";
    in "%f";
}

# Define protocol for setting amplitude
setAmplitude
{
    out "VOLT %f";
}

# Define protocol for reading amplitude
getAmplitude
{
    out "VOLT?";
    in "%f";
}

# Define protocol for setting output on/off
setOnOff
{
    out "OUTP %d";
}

# Define protocol for reading output on/off
getOnOff
{
    out "OUTP?";
    in "%d";
}

# Define protocol for resetting the device
resetDevice
{
    out "*RST";
}

# Define protocol for getting the system Date
getSystemDate
{
    out "SYST:DATE?";
    in "%s";
}

# Define protocol for getting the device identity
getIdentity
{
    out "*IDN?";
    in "%s";
}