# waveformIOC.db
#
# EPICS database file for Keysight 33500B Waveform Generator
#
# Author : Kim Yunho(kim.yh@postech.ac.kr)
# Date   : 2024-09-05
# Version: 0.1

record(ai, "$(SYS):$(DEV):Frequency-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getF(FREQ) $(PORT)")
}

record(ao, "$(SYS):$(DEV):Frequency-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setF(FREQ) $(PORT)")
    field(PREC, "3")
    field(FLNK, "$(SYS):$(DEV):Frequency-RB")
}

record(ai, "$(SYS):$(DEV):Amplitude-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getF(VOLT) $(PORT)")
}

record(ao, "$(SYS):$(DEV):Amplitude-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setF(VOLT) $(PORT)")
    field(PREC, "3")
    field(FLNK, "$(SYS):$(DEV):Amplitude-RB")
}

record(ao, "$(SYS):$(DEV):Offset-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setF(VOLT:OFFS) $(PORT)")
    field(PREC, "3")
    field(FLNK, "$(SYS):$(DEV):Offset-RB")
}

record(ai, "$(SYS):$(DEV):Offset-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getF(VOLT:OFFS) $(PORT)")
}

record(ao, "$(SYS):$(DEV):Phase-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setF(PHAS) $(PORT)")
    field(PREC, "3")
}

record(ai, "$(SYS):$(DEV):Phase-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getF(PHAS) $(PORT)")
}

record(bi, "$(SYS):$(DEV):OnOff-RB")
{
    field(DTYP, "stream")
    field(INP, "@waveformIOC.proto getD(OUTP) $(PORT)")
    field(ZNAM, "Off")
    field(ONAM, "On")
}

record(bo, "$(SYS):$(DEV):OnOff-SP")
{
    field(DTYP, "stream")
    field(OUT, "@waveformIOC.proto setD(OUTP) $(PORT)")
    field(ZNAM, "Off")
    field(ONAM, "On")
    field(FLNK, "$(SYS):$(DEV):OnOff-RB")
}

record(bo, "$(SYS):$(DEV):Reset-CMD")
{
    field(DTYP, "stream")
    field(OUT, "@waveformIOC.proto cmd(*RST) $(PORT)")
    field(PINI, "YES")
}

record(stringin, "$(SYS):$(DEV):DeviceIdentity-RB")
{
    field(DTYP, "stream")
    field(INP, "@waveformIOC.proto getIDN(40) $(PORT)")
    field(PINI, "YES")
}