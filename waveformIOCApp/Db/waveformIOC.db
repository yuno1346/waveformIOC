# waveformIOC.db
#
# EPICS database file for Keysight 33500B Waveform Generator
#
# Author : Kim Yunho(kim.yh@postech.ac.kr)
# Date   : 2024-09-02
# Version: 0.1

record(ai, "$(SYS)$(DEV)Frequency-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getF(FREQ) $(PORT) $(A)")
}

record(ao, "$(SYS)$(DEV)Frequency-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setF(FREQ) $(PORT) $(A)")
    field(PREC, "3")
}

record(ai, "$(SYS)$(DEV)Amplitude-RB")
{
    field(DTYP, "stream")
    field(INP,  "@waveformIOC.proto getD(VOLT) $(PORT) $(A)")
}

record(ao, "$(SYS)$(DEV)Amplitude-SP")
{
    field(DTYP, "stream")
    field(OUT,  "@waveformIOC.proto setD(VOLT) $(PORT) $(A)")
    #field(PREC, "3")
}

# New bi record for on/off status (read)
record(bi, "$(SYS)$(DEV)OnOff-RB")
{
    field(DTYP, "stream")
    field(INP, "@waveformIOC.proto getD(OUTP) $(PORT) $(A)")
    field(ZNAM, "0")
    field(ONAM, "1")
}

# New bo record for on/off control (write)
record(bo, "$(SYS)$(DEV)OnOff-SP")
{
    field(DTYP, "stream")
    field(OUT, "@waveformIOC.proto setD(OUTP) $(PORT) $(A)")
    field(ZNAM, "Off")
    field(ONAM, "On")
}

record(bo, "$(SYS)$(DEV)Reset-CMD")
{
    field(DTYP, "stream")
    field(OUT, "@waveformIOC.proto cmd(*RST) $(PORT) $(A)")
    field(PINI, "YES")
}

record(stringin, "$(SYS)$(DEV)SystemDate-RB")
{
    field(DTYP, "stream")
    field(INP, "@waveformIOC.proto cmd(SYST:DATE?) $(PORT) $(A)")
}

record(stringin, "$(SYS)$(DEV)DeviceIdentity-RB")
{
    field(DTYP, "stream")
    field(INP, "@waveformIOC.proto cmd(*IDN?) $(PORT) $(A)")
    field(PINI, "YES")
}
